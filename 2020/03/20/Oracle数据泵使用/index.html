<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://yoursite.com').hostname,
    root: '/',
    scheme: 'Pisces',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="数据泵的全表，条件及分区导出导入执行pl&#x2F;sql, 并且实现重新映射用户和表">
<meta property="og:type" content="article">
<meta property="og:title" content="Oracle数据泵使用">
<meta property="og:url" content="http://yoursite.com/2020/03/20/Oracle%E6%95%B0%E6%8D%AE%E6%B3%B5%E4%BD%BF%E7%94%A8/index.html">
<meta property="og:site_name" content="g.xian 的博客">
<meta property="og:description" content="数据泵的全表，条件及分区导出导入执行pl&#x2F;sql, 并且实现重新映射用户和表">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-03-20T00:46:01.000Z">
<meta property="article:modified_time" content="2023-09-19T09:08:41.976Z">
<meta property="article:author" content="g.xian">
<meta property="article:tag" content="datapump">
<meta property="article:tag" content="数据泵">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/2020/03/20/Oracle%E6%95%B0%E6%8D%AE%E6%B3%B5%E4%BD%BF%E7%94%A8/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>Oracle数据泵使用 | g.xian 的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">g.xian 的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">阅读书籍笔记,不定期更新</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home  //首页"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive   //归档"></i>归档</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags   //标签"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th  //分类"></i>分类</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/20/Oracle%E6%95%B0%E6%8D%AE%E6%B3%B5%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="g.xian">
      <meta itemprop="description" content="hexo cl&&hexo g&& hexo d本地hexo s">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="g.xian 的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Oracle数据泵使用
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-20 08:46:01" itemprop="dateCreated datePublished" datetime="2020-03-20T08:46:01+08:00">2020-03-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-09-19 17:08:41" itemprop="dateModified" datetime="2023-09-19T17:08:41+08:00">2023-09-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/oracle/" itemprop="url" rel="index">
                    <span itemprop="name">oracle</span>
                  </a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>数据泵的全表，条件及分区导出导入执行pl/sql, 并且实现重新映射用户和表</p>
<a id="more"></a>

<h4 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h4><p><a href="https://docs.oracle.com/cd/E11882_01/server.112/e22490/dp_overview.htm#SUTIL802" target="_blank" rel="noopener">https://docs.oracle.com/cd/E11882_01/server.112/e22490/dp_overview.htm#SUTIL802</a></p>
<h4 id="创建测试单表T"><a href="#创建测试单表T" class="headerlink" title="创建测试单表T"></a>创建测试单表T</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create table USER01.T as select * from all_objects;</span><br></pre></td></tr></table></figure>
<h4 id="创建测试分区表"><a href="#创建测试分区表" class="headerlink" title="创建测试分区表"></a>创建测试分区表</h4><p><a href="https://blog.csdn.net/lizhangyong1989/article/details/26592113" target="_blank" rel="noopener">https://blog.csdn.net/lizhangyong1989/article/details/26592113</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLESPACE TBSP_1 DATAFILE &#39;&#x2F;data&#x2F;oracle&#x2F;oradata&#x2F;orcl&#x2F;TBSP_1.dbf&#39; SIZE 100M;</span><br><span class="line">create table USER01.ware_retail_part</span><br><span class="line">(</span><br><span class="line">    id integer primary key,</span><br><span class="line">    retail_date date,</span><br><span class="line">    ware_name varchar2(50)</span><br><span class="line">)</span><br><span class="line">partition by range(retail_date)</span><br><span class="line">(</span><br><span class="line">   --2011年第一季度为par_1分区</span><br><span class="line">   partition par_01 values less than(to_date(&#39;2011-04-01&#39;,&#39;yyyy-mm-dd&#39;)) tablespace TBSP_1,</span><br><span class="line">   --2011年第二季度为par_2分区</span><br><span class="line">   partition par_02 values less than(to_date(&#39;2011-07-01&#39;,&#39;yyyy-mm-dd&#39;)) tablespace TBSP_1,</span><br><span class="line">   --2011年第三季度为par_3分区</span><br><span class="line">   partition par_03 values less than(to_date(&#39;2011-10-01&#39;,&#39;yyyy-mm-dd&#39;)) tablespace TBSP_1,</span><br><span class="line">   --2011年第四季度为par_4分区</span><br><span class="line">   partition par_04 values less than(to_date(&#39;2012-01-01&#39;,&#39;yyyy-mm-dd&#39;)) tablespace TBSP_1</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">insert into USER01.ware_retail_part values(1,to_date(&#39;2011-01-20&#39;,&#39;yyyy-mm-dd&#39;),&#39;平板电脑&#39;);</span><br><span class="line">insert into USER01.ware_retail_part values(2,to_date(&#39;2011-04-15&#39;,&#39;yyyy-mm-dd&#39;),&#39;小米3手机&#39;);</span><br><span class="line">insert into USER01.ware_retail_part values(3,to_date(&#39;2011-07-25&#39;,&#39;yyyy-mm-dd&#39;),&#39;iWatch&#39;);</span><br><span class="line">insert into USER01.ware_retail_part values(4,to_date(&#39;2011-12-17&#39;,&#39;yyyy-mm-dd&#39;),&#39;华硕笔记本&#39;);</span><br><span class="line"></span><br><span class="line">create table USER01.ware_part</span><br><span class="line">(</span><br><span class="line">    id integer primary key,</span><br><span class="line">    ware_date date,</span><br><span class="line">    ware_name varchar2(50)</span><br><span class="line">)</span><br><span class="line">partition by range(ware_date)</span><br><span class="line">(</span><br><span class="line">   --2011年第一季度为par_6分区</span><br><span class="line">   partition par_06 values less than(to_date(&#39;2011-04-01&#39;,&#39;yyyy-mm-dd&#39;)) tablespace TBSP_1,</span><br><span class="line">   --2011年第二季度为par_7分区</span><br><span class="line">   partition par_07 values less than(to_date(&#39;2011-07-01&#39;,&#39;yyyy-mm-dd&#39;)) tablespace TBSP_1,</span><br><span class="line">   --2011年第三季度为par_8分区</span><br><span class="line">   partition par_08 values less than(to_date(&#39;2011-10-01&#39;,&#39;yyyy-mm-dd&#39;)) tablespace TBSP_1,</span><br><span class="line">   --2011年第四季度为par_9分区</span><br><span class="line">   partition par_09 values less than(to_date(&#39;2012-01-01&#39;,&#39;yyyy-mm-dd&#39;)) tablespace TBSP_1</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">insert into USER01.ware_part values(6,to_date(&#39;2011-01-20&#39;,&#39;yyyy-mm-dd&#39;),&#39;平板电脑&#39;);</span><br><span class="line">insert into USER01.ware_part values(7,to_date(&#39;2011-04-15&#39;,&#39;yyyy-mm-dd&#39;),&#39;小米3手机&#39;);</span><br><span class="line">insert into USER01.ware_part values(8,to_date(&#39;2011-07-25&#39;,&#39;yyyy-mm-dd&#39;),&#39;iWatch&#39;);</span><br><span class="line">insert into USER01.ware_part values(9,to_date(&#39;2011-12-17&#39;,&#39;yyyy-mm-dd&#39;),&#39;华硕笔记本&#39;);</span><br></pre></td></tr></table></figure>


<h4 id="导出多个全表及带条件"><a href="#导出多个全表及带条件" class="headerlink" title="导出多个全表及带条件"></a>导出多个全表及带条件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">ind NUMBER;</span><br><span class="line">spos NUMBER;</span><br><span class="line">slen NUMBER;</span><br><span class="line">h1 NUMBER;</span><br><span class="line">percent_done NUMBER;</span><br><span class="line">job_state VARCHAR2(30);</span><br><span class="line">le ku$_LogEntry;</span><br><span class="line">js ku$_JobStatus;</span><br><span class="line">jd ku$_JobDesc;</span><br><span class="line">sts ku$_Status;</span><br><span class="line">BEGIN</span><br><span class="line">h1:&#x3D;dbms_datapump.open(&#39;EXPORT&#39;,&#39;TABLE&#39;,NULL,&#39;JOB76c8b83602f8499H&#39;,&#39;11.0.0&#39;);</span><br><span class="line">dbms_datapump.add_file(h1,&#39;JOB76c8b83602f8499H_%U.DMP&#39;,&#39;DATA_PUMP_DIR&#39;);</span><br><span class="line">DBMS_DATAPUMP.add_file(handle&#x3D;&gt;h1,filename&#x3D;&gt;&#39;JOB76c8b83602f8499H.log&#39;,directory&#x3D;&gt;&#39;DATA_PUMP_DIR&#39;,filetype&#x3D;&gt;DBMS_DATAPUMP.KU$_FILE_TYPE_LOG_FILE);</span><br><span class="line">DBMS_DATAPUMP.set_parallel(h1,1);</span><br><span class="line">dbms_datapump.set_parameter(handle&#x3D;&gt;h1,name&#x3D;&gt;&#39;COMPRESSION&#39;,value &#x3D;&gt;&#39;ALL&#39;);</span><br><span class="line">DBMS_DATAPUMP.metadata_filter(handle&#x3D;&gt;h1,name&#x3D;&gt;&#39;SCHEMA_EXPR&#39;,VALUE&#x3D;&gt;&#39;IN(&#39;&#39;USER01&#39;&#39;)&#39;);</span><br><span class="line">DBMS_DATAPUMP.metadata_filter(handle&#x3D;&gt;h1,name&#x3D;&gt;&#39;NAME_EXPR&#39;,VALUE&#x3D;&gt;&#39;IN(&#39;&#39;T&#39;&#39;,&#39;&#39;WARE_RETAIL_PART&#39;&#39;)&#39;);</span><br><span class="line">DBMS_DATAPUMP.METADATA_FILTER(handle&#x3D;&gt;h1,name&#x3D;&gt;&#39;EXCLUDE_PATH_EXPR&#39;,value&#x3D;&gt;&#39;&#x3D;&#39;&#39;INDEX&#39;&#39;&#39;);</span><br><span class="line">dbms_datapump.data_filter(h1,&#39;SUBQUERY&#39;,&#39;where OBJECT_ID&#x3D;20&#39;,&#39;T&#39;,&#39;SYSTEM&#39;);</span><br><span class="line">dbms_datapump.data_filter(h1,&#39;SUBQUERY&#39;,&#39;where ID&#x3D;2&#39;,&#39;WARE_RETAIL_PART&#39;,&#39;SYSTEM&#39;);</span><br><span class="line">DBMS_DATAPUMP.METADATA_FILTER(handle&#x3D;&gt;h1,name&#x3D;&gt;&#39;EXCLUDE_PATH_EXPR&#39;,value&#x3D;&gt;&#39;&#x3D;&#39;&#39;CONSTRAINT&#39;&#39;&#39;);</span><br><span class="line">DBMS_DATAPUMP.METADATA_FILTER(handle&#x3D;&gt;h1,name&#x3D;&gt;&#39;EXCLUDE_PATH_EXPR&#39;,value&#x3D;&gt;&#39;&#x3D;&#39;&#39;GRANT&#39;&#39;&#39;);</span><br><span class="line">DBMS_DATAPUMP.METADATA_FILTER(handle&#x3D;&gt;h1,name&#x3D;&gt;&#39;EXCLUDE_PATH_EXPR&#39;,value&#x3D;&gt;&#39;&#x3D;&#39;&#39;TABLE_STATISTICS&#39;&#39;&#39;);</span><br><span class="line">DBMS_DATAPUMP.START_JOB(handle &#x3D;&gt; h1,cluster_ok&#x3D;&gt;0);</span><br><span class="line">dbms_datapump.detach(h1);</span><br><span class="line">END;</span><br></pre></td></tr></table></figure>
<h4 id="导出日志"><a href="#导出日志" class="headerlink" title="导出日志"></a>导出日志</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@bigdata-05 dpdump]# cat JOB76691edf695e4235.log</span><br><span class="line">启动 &quot;SYSTEM&quot;.&quot;JOB76691edf695e4235&quot;:  </span><br><span class="line">正在使用 BLOCKS 方法进行估计...</span><br><span class="line">处理对象类型 TABLE_EXPORT&#x2F;TABLE&#x2F;TABLE_DATA</span><br><span class="line">使用 BLOCKS 方法的总估计: 50 MB</span><br><span class="line">处理对象类型 TABLE_EXPORT&#x2F;TABLE&#x2F;TABLE</span><br><span class="line">. . 导出了 &quot;USER01&quot;.&quot;T&quot;                                7.920 MB   81583 行</span><br><span class="line">. . 导出了 &quot;USER01&quot;.&quot;WARE_RETAIL_PART&quot;:&quot;PAR_01&quot;        5.859 KB       1 行</span><br><span class="line">. . 导出了 &quot;USER01&quot;.&quot;WARE_RETAIL_PART&quot;:&quot;PAR_02&quot;        5.859 KB       1 行</span><br><span class="line">. . 导出了 &quot;USER01&quot;.&quot;WARE_RETAIL_PART&quot;:&quot;PAR_03&quot;        5.851 KB       1 行</span><br><span class="line">. . 导出了 &quot;USER01&quot;.&quot;WARE_RETAIL_PART&quot;:&quot;PAR_04&quot;        5.859 KB       1 行</span><br><span class="line">. . 导出了 &quot;USER01&quot;.&quot;WARE_RETAIL_PART&quot;:&quot;PAR_05&quot;        5.859 KB       1 行</span><br><span class="line">已成功加载&#x2F;卸载了主表 &quot;USER01&quot;.&quot;JOB76691edf695e4235&quot; </span><br><span class="line">******************************************************************************</span><br><span class="line">SYSTEM.JOB76691edf695e4235 的转储文件集为:</span><br><span class="line">  &#x2F;data&#x2F;oracle&#x2F;admin&#x2F;orcl&#x2F;dpdump&#x2F;JOB76691edf695e4235_01.DMP</span><br><span class="line">作业 &quot;USER01&quot;.&quot;JOB76691edf695e4235&quot; 已于 星期二 3月 10 18:35:40 2020 elapsed 0 00:00:03 成功完成</span><br></pre></td></tr></table></figure>



<h4 id="多个分区表导出测试"><a href="#多个分区表导出测试" class="headerlink" title="多个分区表导出测试"></a>多个分区表导出测试</h4><p>多个分区表分区名合并写在一起<br>dbms_datapump.data_filter(handle=&gt;h1,name=&gt;’PARTITION_LIST’,value=&gt;’’’PAR_02’’,’’PAR_03’’,’’PAR_04’’,’’PAR_06’’,’’PAR_07’’’);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">ind NUMBER;</span><br><span class="line">spos NUMBER;</span><br><span class="line">slen NUMBER;</span><br><span class="line">h1 NUMBER;</span><br><span class="line">percent_done NUMBER;</span><br><span class="line">job_state VARCHAR2(30);</span><br><span class="line">le ku$_LogEntry;</span><br><span class="line">js ku$_JobStatus;</span><br><span class="line">jd ku$_JobDesc;</span><br><span class="line">sts ku$_Status;</span><br><span class="line">BEGIN</span><br><span class="line">h1:&#x3D;dbms_datapump.open(&#39;EXPORT&#39;,&#39;TABLE&#39;,NULL,&#39;JOB200211160036ad5846a&#39;,&#39;11.0.0&#39;);</span><br><span class="line">dbms_datapump.add_file(h1,&#39;JOB200211160036ad5846a_%U.DMP&#39;,&#39;DATA_PUMP_DIR&#39;);</span><br><span class="line">DBMS_DATAPUMP.add_file(handle&#x3D;&gt;h1,filename&#x3D;&gt;&#39;JOB200211160036ad5846a.log&#39;,directory&#x3D;&gt;&#39;DATA_PUMP_DIR&#39;,filetype&#x3D;&gt;DBMS_DATAPUMP.KU$_FILE_TYPE_LOG_FILE);</span><br><span class="line">DBMS_DATAPUMP.set_parallel(h1,1);</span><br><span class="line">DBMS_DATAPUMP.metadata_filter(handle&#x3D;&gt;h1,name&#x3D;&gt;&#39;SCHEMA_EXPR&#39;,VALUE&#x3D;&gt;&#39;IN(&#39;&#39;USER01&#39;&#39;)&#39;);</span><br><span class="line">DBMS_DATAPUMP.metadata_filter(handle&#x3D;&gt;h1,name&#x3D;&gt;&#39;NAME_EXPR&#39;,VALUE&#x3D;&gt;&#39;IN(&#39;&#39;WARE_RETAIL_PART&#39;&#39;,&#39;&#39;WARE_PART&#39;&#39;)&#39;);</span><br><span class="line">DBMS_DATAPUMP.METADATA_FILTER(handle&#x3D;&gt;h1,name&#x3D;&gt;&#39;EXCLUDE_PATH_EXPR&#39;,value&#x3D;&gt;&#39;&#x3D;&#39;&#39;INDEX&#39;&#39;&#39;);</span><br><span class="line">dbms_datapump.data_filter(handle&#x3D;&gt;h1,name&#x3D;&gt;&#39;PARTITION_LIST&#39;,value&#x3D;&gt;&#39;&#39;&#39;PAR_02&#39;&#39;,&#39;&#39;PAR_03&#39;&#39;,&#39;&#39;PAR_04&#39;&#39;,&#39;&#39;PAR_06&#39;&#39;,&#39;&#39;PAR_07&#39;&#39;&#39;);</span><br><span class="line">DBMS_DATAPUMP.METADATA_FILTER(handle&#x3D;&gt;h1,name&#x3D;&gt;&#39;EXCLUDE_PATH_EXPR&#39;,value&#x3D;&gt;&#39;&#x3D;&#39;&#39;CONSTRAINT&#39;&#39;&#39;);</span><br><span class="line">DBMS_DATAPUMP.METADATA_FILTER(handle&#x3D;&gt;h1,name&#x3D;&gt;&#39;EXCLUDE_PATH_EXPR&#39;,value&#x3D;&gt;&#39;&#x3D;&#39;&#39;GRANT&#39;&#39;&#39;);</span><br><span class="line">DBMS_DATAPUMP.METADATA_FILTER(handle&#x3D;&gt;h1,name&#x3D;&gt;&#39;EXCLUDE_PATH_EXPR&#39;,value&#x3D;&gt;&#39;&#x3D;&#39;&#39;TABLE_STATISTICS&#39;&#39;&#39;);</span><br><span class="line">DBMS_DATAPUMP.START_JOB(handle &#x3D;&gt; h1,cluster_ok&#x3D;&gt;0);</span><br><span class="line">dbms_datapump.detach(h1);</span><br><span class="line">END;</span><br></pre></td></tr></table></figure>
<h4 id="导入不分全表和分区"><a href="#导入不分全表和分区" class="headerlink" title="导入不分全表和分区"></a>导入不分全表和分区</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">  ind NUMBER;</span><br><span class="line">  spos NUMBER;</span><br><span class="line">  slen NUMBER;</span><br><span class="line">  h1 NUMBER;</span><br><span class="line">  percent_done NUMBER;</span><br><span class="line">  job_state VARCHAR2(30);</span><br><span class="line">  le ku$_LogEntry;</span><br><span class="line">  js ku$_JobStatus;</span><br><span class="line">  jd ku$_JobDesc;</span><br><span class="line">  sts ku$_Status;</span><br><span class="line">BEGIN</span><br><span class="line">  h1 :&#x3D; DBMS_DATAPUMP.OPEN(&#39;IMPORT&#39;,&#39;FULL&#39;,NULL,&#39;JOB76691edf695e4215&#39;);</span><br><span class="line">  DBMS_DATAPUMP.ADD_FILE(h1,&#39;JOB200211160036ad5847aa_%U.DMP&#39;,&#39;MYDUMP&#39;);</span><br><span class="line">  DBMS_DATAPUMP.add_file(handle &#x3D;&gt; h1,filename  &#x3D;&gt; &#39;JOB76691edf695e4215.log&#39;,directory &#x3D;&gt; &#39;MYDUMP&#39;,filetype  &#x3D;&gt; DBMS_DATAPUMP.KU$_FILE_TYPE_LOG_FILE);</span><br><span class="line">  DBMS_DATAPUMP.set_parallel (h1, 1);</span><br><span class="line">  DBMS_DATAPUMP.METADATA_REMAP(h1,&#39;REMAP_SCHEMA&#39;,&#39;USER01&#39;,&#39;SYSTEM&#39;); </span><br><span class="line">  </span><br><span class="line">--  DBMS_DATAPUMP.METADATA_REMAP(h1,&#39;REMAP_TABLE&#39;,&#39;WROW&#39;,&#39;WROW_3&#39;); </span><br><span class="line">  DBMS_DATAPUMP.METADATA_TRANSFORM(h1,&#39;SEGMENT_ATTRIBUTES&#39;,1);</span><br><span class="line">  DBMS_DATAPUMP.SET_PARAMETER(h1,&#39;TABLE_EXISTS_ACTION&#39;,&#39;REPLACE&#39;);</span><br><span class="line">  DBMS_DATAPUMP.START_JOB(handle &#x3D;&gt; h1,cluster_ok&#x3D;&gt;0);</span><br><span class="line">  dbms_datapump.detach(h1);</span><br><span class="line">END;</span><br></pre></td></tr></table></figure>

<h4 id="附相关sql"><a href="#附相关sql" class="headerlink" title="附相关sql"></a>附相关sql</h4><h5 id="查找dblink路径"><a href="#查找dblink路径" class="headerlink" title="查找dblink路径"></a>查找dblink路径</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from dba_db_links;</span><br><span class="line">select count(1) count from dba_db_links where owner in (&#39;PUBLIC&#39;,&#39;SYSTEM&#39;) and db_link IN (&#39;ORCL_DBLINK&#39;,&#39;ORCL_DBLINK.LOCAL&#39;)</span><br></pre></td></tr></table></figure>
<h5 id="查找用户名"><a href="#查找用户名" class="headerlink" title="查找用户名"></a>查找用户名</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select USERNAME from dba_users where lower(username) like &#39;%sys%&#39;;</span><br></pre></td></tr></table></figure>
<h5 id="查找任务状态"><a href="#查找任务状态" class="headerlink" title="查找任务状态"></a>查找任务状态</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select STATE from dba_datapump_jobs where JOB_NAME&#x3D;&#39;JOBd3d222dda2894120&#39;;</span><br></pre></td></tr></table></figure>
<h5 id="根据用户查找表名"><a href="#根据用户查找表名" class="headerlink" title="根据用户查找表名"></a>根据用户查找表名</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select table_name tname from dba_tables  where owner&#x3D;&#39;SYSTEM&#39; and lower(table_name) like &#39;%%&#39; </span><br><span class="line">select count(1)  from dba_tables</span><br><span class="line">SELECT * FROM (SELECT ROWNUM AS rowno, t.table_name FROM dba_tables t  WHERE  ROWNUM &lt;&#x3D; 20) table_alias WHERE table_alias.rowno &gt;&#x3D; 10;</span><br><span class="line">&#x2F;&#x2F;分页处理</span><br><span class="line">int page&#x3D;1 rows&#x3D;20</span><br><span class="line">select tname from (select table_name tname,rownum myrow from dba_tables  where rownum &lt;&#x3D; 20 and lower(owner)&#x3D;&#39;system&#39; and lower(table_name) like &#39;%t%&#39; ) mytable where myrow&gt;&#x3D;1</span><br><span class="line">int page&#x3D;2 rows&#x3D;20</span><br><span class="line">select tname from (select table_name tname,rownum myrow from dba_tables  where rownum &lt;&#x3D; 40 and lower(owner)&#x3D;&#39;system&#39; and lower(table_name) like &#39;%t%&#39; ) mytable where myrow&gt;&#x3D;21</span><br><span class="line">		 select table_name tname from dba_tables  where owner&#x3D;&#39;SYSTEM&#39; and lower(table_name) like &#39;%t%&#39;</span><br></pre></td></tr></table></figure>
<h5 id="查找数据泵目录"><a href="#查找数据泵目录" class="headerlink" title="查找数据泵目录"></a>查找数据泵目录</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from dba_directories</span><br></pre></td></tr></table></figure>
<h5 id="查找失败任务-？"><a href="#查找失败任务-？" class="headerlink" title="查找失败任务 ？"></a>查找失败任务 ？</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SELECT o.status,</span><br><span class="line">       o.object_id,</span><br><span class="line">       o.object_type,</span><br><span class="line">       o.owner || &#39;.&#39; || object_name &quot;OWNER.OBJECT&quot;</span><br><span class="line">  FROM dba_objects o, dba_datapump_jobs j</span><br><span class="line"> WHERE o.owner &#x3D; j.owner_name</span><br><span class="line">   AND o.object_name &#x3D; j.job_name</span><br><span class="line"> ORDER BY 4, 2;</span><br><span class="line"> </span><br><span class="line">status object_id object_type OWNER.OBJECT</span><br><span class="line">VALID	85358	TABLE	SYSTEM.JOBd3d222dda2894120</span><br><span class="line">VALID	85388	TABLE	SYSTEM.JOBd3d222dda2894121</span><br></pre></td></tr></table></figure>
<h5 id="和失败任务有关？"><a href="#和失败任务有关？" class="headerlink" title="和失败任务有关？"></a>和失败任务有关？</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM DBA_DATAPUMP_SESSIONS;</span><br><span class="line"></span><br><span class="line">SYSTEM	JOBd3d222dda2894120	1	000000014A47A7F0	DBMS_DATAPUMP</span><br><span class="line">SYSTEM	JOBd3d222dda2894120	1	000000014743C3E0	MASTER</span><br><span class="line">SYSTEM	JOBd3d222dda2894121	1	000000014A47A7F0	DBMS_DATAPUMP</span><br><span class="line">SYSTEM	JOBd3d222dda2894121	1	000000014749AF00	MASTER</span><br></pre></td></tr></table></figure>
<h5 id="数据库文件？"><a href="#数据库文件？" class="headerlink" title="数据库文件？"></a>数据库文件？</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM DBA_DATA_FILES;</span><br><span class="line">&#x2F;data&#x2F;oracle&#x2F;oradata&#x2F;orcl&#x2F;system01.dbf	1	SYSTEM	744488960	90880	AVAILABLE	1	YES	34359721984	4194302	1280	743440384	90752	SYSTEM</span><br></pre></td></tr></table></figure>
<h5 id="查询命令空间"><a href="#查询命令空间" class="headerlink" title="查询命令空间"></a>查询命令空间</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select t.tablespace_name from dba_tablespaces t where t.contents&lt;&gt;&#39;UNDO&#39; and t.contents&lt;&gt;&#39;TEMPORARY&#39; group by t.tablespace_name order by t.tablespace_name asc</span><br></pre></td></tr></table></figure>

<h5 id="原impdp命令"><a href="#原impdp命令" class="headerlink" title="原impdp命令"></a>原impdp命令</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup impdp dbauser&#x2F;dba_xx tables&#x3D;USERINFO.ENTITY_SYNC_QUEUE_HIS_929:PART_713_201709 directory&#x3D;HIS_EXP dumpfile&#x3D;ENTITY_SYNC_QUEUE_HIS_929_%U.dmp logfile&#x3D;IMP_ENTITY_SYNC_QUEUE_HIS_929.log cluster&#x3D;no parallel&#x3D;8 table_exists_action&#x3D;append remap_table&#x3D;ENTITY_SYNC_QUEUE_HIS_929:ENTITY_SYNC_QUEUE_HIS_929_ZWA &amp;</span><br></pre></td></tr></table></figure>

<h5 id="环境检查，目标库磁盘信息，百分比已用：已用"><a href="#环境检查，目标库磁盘信息，百分比已用：已用" class="headerlink" title="环境检查，目标库磁盘信息，百分比已用：已用"></a>环境检查，目标库磁盘信息，百分比已用：已用</h5><p>[INFO][2020-01-19 16:57:52,867][com.snc.system.utils.BaseSqlHelper][http-bio-8080-exec-8]执行 SQL：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select a.TABLESPACE_NAME, a.TOTAL_SIZEM, round(a.total_sizem-b.free_sizem) USED_SIZEM,round((a.total_sizem-b.free_sizem)*100&#x2F;a.total_sizem,2) USED_PCT,round(b.free_sizem) FREE_SIZEM from (select tablespace_name,sum(bytes)&#x2F;1024&#x2F;1024 total_sizem from dba_data_files group by tablespace_name) a,(select tablespace_name,sum(bytes)&#x2F;1024&#x2F;1024 free_sizem from dba_free_space group by tablespace_name) b where a.tablespace_name&#x3D;b.tablespace_name order by used_pct desc</span><br></pre></td></tr></table></figure>
<p>[INFO][2020-01-19 16:57:52,906][com.snc.system.utils.BaseSqlHelper][http-bio-8080-exec-8]执行SQL 耗时：39毫秒<br>大小：4[{USED_SIZEM=748, TABLESPACE_NAME=UNDOTBS1, FREE_SIZEM=2, USED_PCT=99.73, TOTAL_SIZEM=750}, {USED_SIZEM=687, TABLESPACE_NAME=SYSTEM, FREE_SIZEM=13, USED_PCT=98.16, TOTAL_SIZEM=700}, {USED_SIZEM=402, TABLESPACE_NAME=SYSAUX, FREE_SIZEM=198, USED_PCT=66.94, TOTAL_SIZEM=600}, {USED_SIZEM=1, TABLESPACE_NAME=USERS, FREE_SIZEM=4, USED_PCT=20, TOTAL_SIZEM=5}]</p>
<p>将表名加进去:T<br>返回值:[T]<br>检查：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select index_name from dba_indexes where table_owner&#x3D;&#39;SYSTEM&#39; and table_name like &#39;%T%&#39;</span><br></pre></td></tr></table></figure>
<h5 id="此sql暂不理解"><a href="#此sql暂不理解" class="headerlink" title="此sql暂不理解"></a>此sql暂不理解</h5><p>[INFO][2020-01-19 17:16:05,192][com.snc.system.utils.BaseSqlHelper][http-bio-8080-exec-19]执行 SQL：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select partition_name, sum(BYTES) BYTES from (SELECT a.PARTITION_NAME,SUM(a.BYTES) as BYTES FROM DBA_segments a where a.SEGMENT_TYPE like &#39;TABLE%&#39; AND a.OWNER &#x3D; &#39;SYSTEM&#39; AND a.SEGMENT_NAME &#x3D; &#39;T&#39;group by a.partition_name union all select s.partition_name, sum(s.bytes) as BYTES from dba_segments s, dba_indexes i where s.segment_type like &#39;INDEX%&#39; and i.table_owner &#x3D; &#39;SYSTEM&#39; and i.table_name &#x3D; &#39;T&#39; and s.owner &#x3D; i.owner and s.segment_name &#x3D; i.index_name group by s.partition_name union all select b. partition_name, sum(b.bytes) as BYTES from dba_lobs a, dba_segments b where a.segment_name &#x3D; b.segment_name and a.owner &#x3D; &#39;SYSTEM&#39; and a.table_name &#x3D; &#39;T&#39;group by b.partition_name) group by partition_name</span><br></pre></td></tr></table></figure>
<h5 id="根据字段值获取分区名称"><a href="#根据字段值获取分区名称" class="headerlink" title="根据字段值获取分区名称"></a>根据字段值获取分区名称</h5><p> 2020/02/11 16:00:36 -  - 备份表的where条件，计算是否过滤….<br> 2020/02/11 16:00:36 -  - 过滤表达式： where RETAIL_DATE &lt;  to_date(‘’2019-01-01’’,’’yyyy-mm-dd’’)<br> 2020/02/11 16:00:36 -  - 当前策略类型为： 2 (按时间分区) ，验证是否符合high_value获取的条件 。<br> 2020/02/11 16:00:36 -  - 符合high_value获取的条件，正在使用效率更高的获取方式，计算分区名。<br> 2020/02/11 16:00:36 -  - 获取high_value的分区的sql语句：SELECT TABLE_OWNER,TABLE_NAME,PARTITION_NAME,HIGH_VALUE,PARTITION_POSITION FROM DBA_TAB_PARTITIONS WHERE TABLE_OWNER =’SYSTEM’ AND TABLE_NAME=’WARE_RETAIL_PART’  ORDER BY PARTITION_POSITION ASC<br> 2020/02/11 16:00:37 -  - 4：检测high_value的时间，已大于保留的时间边界  PAR_05<br> 2020/02/11 16:00:37 -  - 符合备份条件的分区名为： [PAR_01, PAR_02, PAR_03, PAR_04]<br> 2020/02/11 16:00:37 -  - 构建完成。<br> 2020/02/11 16:00:37 -  - datapump脚本：</p>
<h5 id="新建逻辑目录"><a href="#新建逻辑目录" class="headerlink" title="新建逻辑目录"></a>新建逻辑目录</h5><p>最好以system等管理员创建逻辑目录，Oracle不会自动创建实际的物理目录“D:\oracleData”（务必手动创建此目录），仅仅是进行定义逻辑路径dump_dir；<br>例如： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create directory mydata as &#39;&#x2F;data&#x2F;oracle&#x2F;oradata&#x2F;mydata&#39;;</span><br></pre></td></tr></table></figure>
<p>查看逻辑目录是否创建成功<br>select * from dba_directories</p>
<h5 id="network-link使用"><a href="#network-link使用" class="headerlink" title="network_link使用"></a>network_link使用</h5><p>通过db_link查询另外一个库的数据</p>
<p> select * from abb_comp_01@dataware_dblink;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">表数据导入至历史库 network_link&#x3D;TO_ACTDB1_12C</span><br><span class="line">userid&#x3D;&#39;to_his&#x2F;xxxxx&#39;</span><br><span class="line">logfile&#x3D;MV_ACTDB1_AD_20200204130611.log</span><br><span class="line">directory&#x3D;EXPDP_DIR</span><br><span class="line">cluster&#x3D;n</span><br><span class="line">exclude&#x3D;INDEX,GRANT,STATISTICS,CONSTRAINT</span><br><span class="line">table_exists_action&#x3D;APPEND</span><br><span class="line">transform&#x3D;segment_attributes:n</span><br><span class="line">tables&#x3D;(</span><br><span class="line">AD.CA_NOTIFY_TASK_0746_3_202001</span><br><span class="line">AD.CA_NOTIFY_TASK_0734_2_202001</span><br><span class="line">AD.CA_NOTIFY_TASK_0746_0_202001</span><br><span class="line">AD.CA_NOTIFY_TASK_0736_7_202001</span><br><span class="line">AD.CA_NOTIFY_TASK_0735_0_202001</span><br><span class="line">AD.CA_NOTIFY_TASK_0746_1_202001</span><br><span class="line">AD.CA_NOTIFY_TASK_0732_8_202001</span><br><span class="line">AD.CA_NOTIFY_TASK_0736_4_202001</span><br><span class="line">AD.CA_NOTIFY_TASK_0736_5_202001</span><br><span class="line">AD.CA_NOTIFY_TASK_0734_7_202001</span><br><span class="line">AD.CA_NOTIFY_TASK_0739_9_202001</span><br><span class="line">AD.CA_NOTIFY_TASK_0746_9_202001</span><br><span class="line">AD.CA_NOTIFY_TASK_0732_0_202001</span><br><span class="line">AD.CA_NOTIFY_TASK_0745_7_202001</span><br><span class="line">AD.CA_NOTIFY_TASK_0732_7_202001                                    )</span><br><span class="line"></span><br><span class="line">表分区导入至历史库脚本 network_link&#x3D;TO_BOSSDB1_12C userid&#x3D;&#39;to_his&#x2F;xxxx&#39;</span><br><span class="line">logfile&#x3D;MV_BOSSDB1_UCR_ACT11_202002030235.log1</span><br><span class="line">remap_schema&#x3D;UCR_ACT11:BAK_ACT11_2019 directory&#x3D;EXPDP_DIR</span><br><span class="line">exclude&#x3D;INDEX,GRANT,STATISTICS,CONSTRAINT table_exists_action&#x3D;APPEND</span><br><span class="line">transform&#x3D;segment_attributes:n tables&#x3D;(</span><br><span class="line">UCR_ACT11.TF_BHB_ACCESSLOG_2013:PAR_TF_B_ACCESSLOG_1</span><br><span class="line">UCR_ACT11.TF_BHB_ACCESSLOG_2014:PAR_TF_B_ACCESSLOG_1</span><br><span class="line">UCR_ACT11.TF_BHB_ACCESSLOG_2015:PAR_TF_B_ACCESSLOG_1</span><br><span class="line">UCR_ACT11.TF_BHB_ACCESSLOG_2016:PAR_TF_B_ACCESSLOG_1</span><br><span class="line">UCR_ACT11.TF_BHB_ACCESSLOG_2017:PAR_TF_B_ACCESSLOG_1</span><br><span class="line">UCR_ACT11.TF_BHB_ACCESSLOG_2018:PAR_TF_B_ACCESSLOG_1 )</span><br></pre></td></tr></table></figure>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/datapump/" rel="tag"># datapump</a>
              <a href="/tags/%E6%95%B0%E6%8D%AE%E6%B3%B5/" rel="tag"># 数据泵</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/01/08/flink%E6%B6%88%E8%B4%B9kafka%E5%86%99%E5%85%A5es-demo/" rel="prev" title="flink消费kafka写入es_demo">
      <i class="fa fa-chevron-left"></i> flink消费kafka写入es_demo
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/12/07/%E5%8E%86%E5%8F%B2%E7%9A%84%E7%BB%88%E7%BB%93%E4%B8%8E%E6%9C%80%E5%90%8E%E7%9A%84%E4%BA%BA-%E7%A6%8F%E5%B1%B1-%E7%90%86%E6%83%B3%E5%9B%BD%E8%AF%91%E4%B8%9B/" rel="next" title="历史的终结与最后的人-福山-理想国译丛">
      历史的终结与最后的人-福山-理想国译丛 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#官方文档"><span class="nav-number">1.</span> <span class="nav-text">官方文档</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#创建测试单表T"><span class="nav-number">2.</span> <span class="nav-text">创建测试单表T</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#创建测试分区表"><span class="nav-number">3.</span> <span class="nav-text">创建测试分区表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#导出多个全表及带条件"><span class="nav-number">4.</span> <span class="nav-text">导出多个全表及带条件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#导出日志"><span class="nav-number">5.</span> <span class="nav-text">导出日志</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多个分区表导出测试"><span class="nav-number">6.</span> <span class="nav-text">多个分区表导出测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#导入不分全表和分区"><span class="nav-number">7.</span> <span class="nav-text">导入不分全表和分区</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#附相关sql"><span class="nav-number">8.</span> <span class="nav-text">附相关sql</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#查找dblink路径"><span class="nav-number">8.1.</span> <span class="nav-text">查找dblink路径</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#查找用户名"><span class="nav-number">8.2.</span> <span class="nav-text">查找用户名</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#查找任务状态"><span class="nav-number">8.3.</span> <span class="nav-text">查找任务状态</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#根据用户查找表名"><span class="nav-number">8.4.</span> <span class="nav-text">根据用户查找表名</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#查找数据泵目录"><span class="nav-number">8.5.</span> <span class="nav-text">查找数据泵目录</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#查找失败任务-？"><span class="nav-number">8.6.</span> <span class="nav-text">查找失败任务 ？</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#和失败任务有关？"><span class="nav-number">8.7.</span> <span class="nav-text">和失败任务有关？</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#数据库文件？"><span class="nav-number">8.8.</span> <span class="nav-text">数据库文件？</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#查询命令空间"><span class="nav-number">8.9.</span> <span class="nav-text">查询命令空间</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#原impdp命令"><span class="nav-number">8.10.</span> <span class="nav-text">原impdp命令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#环境检查，目标库磁盘信息，百分比已用：已用"><span class="nav-number">8.11.</span> <span class="nav-text">环境检查，目标库磁盘信息，百分比已用：已用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#此sql暂不理解"><span class="nav-number">8.12.</span> <span class="nav-text">此sql暂不理解</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#根据字段值获取分区名称"><span class="nav-number">8.13.</span> <span class="nav-text">根据字段值获取分区名称</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#新建逻辑目录"><span class="nav-number">8.14.</span> <span class="nav-text">新建逻辑目录</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#network-link使用"><span class="nav-number">8.15.</span> <span class="nav-text">network_link使用</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="g.xian"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">g.xian</p>
  <div class="site-description" itemprop="description">hexo cl&&hexo g&& hexo d本地hexo s</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">148</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">48</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">112</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/gxianch" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;gxianch" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/%E5%8F%91%E9%82%AE%E4%BB%B6%E8%87%B3:g.xian.ch@gmail.com" title="E-Mail → 发邮件至:g.xian.ch@gmail.com"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://book4you.org/" title="https:&#x2F;&#x2F;book4you.org&#x2F;" rel="noopener" target="_blank">ZLibrary</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://www.banshujiang.cn/" title="http:&#x2F;&#x2F;www.banshujiang.cn&#x2F;" rel="noopener" target="_blank">banshujiang</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.packtpub.com/tech" title="https:&#x2F;&#x2F;www.packtpub.com&#x2F;tech" rel="noopener" target="_blank">packtpub</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.manning.com/" title="https:&#x2F;&#x2F;www.manning.com&#x2F;" rel="noopener" target="_blank">manning</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://coolshell.cn/" title="https:&#x2F;&#x2F;coolshell.cn&#x2F;" rel="noopener" target="_blank">coolshell</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">g.xian</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
